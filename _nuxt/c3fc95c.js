(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{488:function(e,t,n){"use strict";n.r(t);var r=n(4),l=(n(31),n(30),n(33),n(112),n(252),n(174),{middleware:"authenticated",data:function(){return{valid:!0,title:"",link:"",subtitle:"",files:[],imageUrl:"",rules:[function(e){return!!e||"subtitle is required"},function(e){return e&&e.length<=250||"Max 250 characters"}],rulesImage:[function(e){return!e||e.size<2e6||"Avatar size should be less than 2 MB!"}],dialog:!1,search:"",headers:[{text:"Title",align:"start",sortable:!1,value:"title"},{text:"Subtitle",align:"start",value:"subtitle"},{text:"Image",align:"center",value:"image"},{text:"Link",align:"center",value:"link"},{text:"Action ",align:"center",value:"delete"}],contents:[]}},mounted:function(){this.getData()},methods:{closeDialog:function(){this.$refs.form.reset(),this.dialog=!1},openLink:function(e){console.warn("item",e),window.open(e.link_post,"_blank")},handleSaveData:function(){console.warn("files",this.files),this.$refs.form.validate()&&this.files.name&&(this.uploadImageFile(this.files),this.dialog=!1)},uploadImageFile:function(e){var t=this;if(e.type.match("image.*")){var n={contentType:e.type};this.$fire.storage.ref("images/".concat(e.name)).put(e,n).then((function(e){console.warn("snapshot",e),e.ref.getDownloadURL().then((function(e){t.imageUrl=e,console.warn("url",e),console.warn("this.imageUrl",t.imageUrl),t.saveDataFirebase()}))})).catch((function(e){console.error("Error uploading image",e)}))}else alert("Please upload an image.")},saveDataFirebase:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fire.database.ref("content").push({title:e.title,subtitle:e.subtitle,imageUrl:e.imageUrl,link_post:e.link}).catch((function(e){return console.log(e.code,e.message)}));case 2:n=t.sent,console.warn("submit",n);case 4:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,e.$fire.database.ref("content/").once("value",(function(e){console.log(e.val());var data=e.val(),t=Object.values(data);n.contents=t,console.warn("itemData",t)})).catch((function(e){return console.log(e.message)}));case 3:r=t.sent,console.warn("getcontents",r);case 5:case"end":return t.stop()}}),t)})))()}}}),o=n(71),c=n(89),d=n.n(c),v=n(188),f=n(379),m=n(377),h=n(475),k=n(370),x=n(485),w=n(479),_=n(480),V=n(476),D=n(138),y=n(477),T=n(368),C=n(382),I=n(481),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center",align:"center"}},[n("v-col",[n("div",{staticClass:"text-right mb-3"},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{depressed:"",color:"primary"},on:{click:function(t){e.dialog=!0}}},[e._v("\n        add content\n      ")])],1),e._v(" "),n("v-card",[n("v-card-title",[e._v("\n        Management contents\n        "),n("v-spacer"),e._v(" "),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-data-table",{attrs:{headers:e.headers,items:e.contents,search:e.search},scopedSlots:e._u([{key:"item.image",fn:function(e){var t=e.item;return[n("v-img",{attrs:{contain:"","max-height":"110","max-width":"116",src:t.imageUrl}})]}},{key:"item.link",fn:function(t){var r=t.item;return[n("v-btn",{attrs:{rounded:"",color:"primary",dark:""},on:{click:function(t){return e.openLink(r)}}},[e._v("\n            link\n          ")])]}},{key:"item.delete",fn:function(){return[n("v-btn",{attrs:{rounded:"",color:"error",dark:""}},[e._v(" Delete ")])]},proxy:!0}],null,!0)})],1)],1),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("ADD CONTENT")])]),e._v(" "),n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Ttitle",rules:[function(e){return!!e||"Title is required"}]},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{counter:"",label:"Subtitle","auto-grow":"",outlined:"",rows:"4","row-height":"30",shaped:"",rules:e.rules},model:{value:e.subtitle,callback:function(t){e.subtitle=t},expression:"subtitle"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Link website",rules:[function(e){return!!e||"link is required"}]},model:{value:e.link,callback:function(t){e.link=t},expression:"link"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-file-input",{attrs:{accept:"image/png, image/jpeg, image/bmp",rules:e.rulesImage,placeholder:"Pick an Image","prepend-icon":"mdi-camera",label:"Image"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1)],1)],1),e._v(" "),n("small",[e._v("*indicates required field")])],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialog}},[e._v("\n            Close\n          ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.handleSaveData}},[e._v("\n            Save\n          ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VBtn:v.a,VCard:f.a,VCardActions:m.a,VCardText:m.b,VCardTitle:m.c,VCol:h.a,VContainer:k.a,VDataTable:x.a,VDialog:w.a,VFileInput:_.a,VForm:V.a,VImg:D.a,VRow:y.a,VSpacer:T.a,VTextField:C.a,VTextarea:I.a})}}]);